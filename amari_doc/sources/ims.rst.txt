ims.cfg
=======

.. contents::
   :depth: 2

Параметры конфига
-----------------
Синтаксис конфигов
~~~~~~~~~~~~~~~~~~
Оформление конфигурационных файлов схоже по структуре с JSON.

1. Поддерживаемые типы данных:

    * Числа (64-битные с плавающей точкой): `13.4`;
    * Комплексные числа: `1.2+3*I`;
    * Строки: `"string"`;
    * Булеаны: `true` или `false`;
    * Объекты: `{ field1: value1, field2: vaue2, ... }`;
    * Массивы: `[ value1, value2, ... ]`;
    
2. Базовые операции +, -, * и / поддерживаются с числами и комплексными числами. + также соединяет строки. Также поддерживаются операторы !, ||, &&, ==, !=, <, <=, >=, >.
3. Числа 0 и 1 поддерживаются как синонимы `false` и `true`.
4. {} на верхнем уровне опциональны.
5. ” для имён значений опционально.
6. Значения могут быть продублированы. Перезапись будет проихводится соответственно порядку чтения файла.
    
    .. code-block:: javascript
        
        {
            value: "foo",
            value: "bar",
            sub: {
                value: "foo",
            },
            sub: {
                value: "bar",
            }
        }
    
    Равнозначно
    
    .. code-block:: javascript
        
        {
            value: "bar",
            sub: {
                value: "bar"
            }
        }

7. Возможно добавление файлов командой `include`. Массивы добавлять нельзя.
    Если файл *file1.cfg* выглядит так:
    
    .. code-block:: javascript
        
        value: "foo",
        include "file2.cfg",
        foo: "foo"
    
    А файл *file2.cfg* так:
    
    .. code-block:: javascript
        
        value: "bar",
        foo: "bar"
    
    То конечные параметры будут:
    
    .. code-block:: javascript
        
        {
            value: "bar",
            foo: "foo"
        }

Общие параметры
~~~~~~~~~~~~~~~
+-----------------------+--------------------------------------------+
| Параметр              | Описание                                   |
+=======================+============================================+
| log_filename          |                                            |
+-----------------------+--------------------------------------------+
| log_options           |                                            |
+-----------------------+--------------------------------------------+

Параметры IMS
~~~~~~~~~~~~~
+-------------------------------------+----------------------------------------------------+
| Параметр                            | Описание                                           |
+================+====================+====================================================+
| sip_addr       | addr               |                                                    |
|                +--------------------+----------------------------------------------------+
|                | bind_addr          |                                                    |
|                +--------------------+----------------------------------------------------+
|                | port_min           |                                                    |
|                +--------------------+----------------------------------------------------+
|                | port_max           |                                                    |
+----------------+--------------------+----------------------------------------------------+
| sctp_addr                           |                                                    |
+-------------------------------------+----------------------------------------------------+
| cx_server_addr                      |                                                    |
+-------------------------------------+----------------------------------------------------+
| cx_bind_addr                        |                                                    |
+-------------------------------------+----------------------------------------------------+
| cx_origin_realm                     |                                                    |
+-------------------------------------+----------------------------------------------------+
| cx_origin_host                      |                                                    |
+-------------------------------------+----------------------------------------------------+
| cx_watchdog_duration                |                                                    |
+-------------------------------------+----------------------------------------------------+
| rx_server_addr                      |                                                    |
+-------------------------------------+----------------------------------------------------+
| rx_bind_addr                        |                                                    |
+-------------------------------------+----------------------------------------------------+
| rx_origin_realm                     |                                                    |
+-------------------------------------+----------------------------------------------------+
| rx_origin_host                      |                                                    |
+-------------------------------------+----------------------------------------------------+
| rx_watchdog_duration                |                                                    |
+-------------------------------------+----------------------------------------------------+
| domain                              |                                                    |
+-------------------------------------+----------------------------------------------------+
| tcp_threshold                       |                                                    |
+-------------------------------------+----------------------------------------------------+
| session_expires                     |                                                    |
+-------------------------------------+----------------------------------------------------+
| 100rel                              |                                                    |
+-------------------------------------+----------------------------------------------------+
| precondition                        |                                                    |
+-------------------------------------+----------------------------------------------------+
| p_called_party_id                   |                                                    |
+-------------------------------------+----------------------------------------------------+
| ipsec                               |                                                    |
+-------------------------------------+----------------------------------------------------+
| ipsec_aalg_list                     |                                                    |
+-------------------------------------+----------------------------------------------------+
| ipsec_ealg_list                     |                                                    |
+-------------------------------------+----------------------------------------------------+
| dialog_timeout                      |                                                    |
+-------------------------------------+----------------------------------------------------+
| auth_on_register_only               |                                                    |
+-------------------------------------+----------------------------------------------------+
| com_addr                            |                                                    |
+-------------------------------------+----------------------------------------------------+
| com_name                            |                                                    |
+-------------------------------------+----------------------------------------------------+
| com_ssl_sertificate                 |                                                    |
+-------------------------------------+----------------------------------------------------+
| com_ssl_key                         |                                                    |
+-------------------------------------+----------------------------------------------------+
| com_ssl_peer_verify                 |                                                    |
+----------------+--------------------+----------------------------------------------------+
| license_server | server_addr        |                                                    |
|                +--------------------+----------------------------------------------------+
|                | name               |                                                    |
|                +--------------------+----------------------------------------------------+
|                | tag                |                                                    |
+----------------+--------------------+----------------------------------------------------+
| sms_expires                         |                                                    |
+-------------------------------------+----------------------------------------------------+
| binding_expires                     |                                                    |
+-------------------------------------+----------------------------------------------------+
| subscribe_expires                   |                                                    |
+-------------------------------------+----------------------------------------------------+
| user_agent                          |                                                    |
+-------------------------------------+----------------------------------------------------+
| timer_t1                            |                                                    |
+-------------------------------------+----------------------------------------------------+
| timer_t2                            |                                                    |
+-------------------------------------+----------------------------------------------------+
| timer_t4                            |                                                    |
+----------------+--------------------+----------------------------------------------------+
| custom_headers | name               |                                                    |
|                +--------------------+----------------------------------------------------+
|                | value              |                                                    |
|                +--------------------+----------------------------------------------------+
|                | methods            |                                                    |
|                +--------------------+----------------------------------------------------+
|                | codes              |                                                    |
+----------------+--------------------+----------------------------------------------------+
| sms_retry_delay                     |                                                    |
+-------------------------------------+----------------------------------------------------+
| echo                                |                                                    |
+-------------------------------------+----------------------------------------------------+
| mt_call_sdp_file                    |                                                    |
+-------------------------------------+----------------------------------------------------+
| sms_message_filter                  |                                                    |
+-------------------------------------+----------------------------------------------------+
| sms_forced_cp_cause                 |                                                    |
+-------------------------------------+----------------------------------------------------+
| sms_forced_rp_cause                 |                                                    |
+-------------------------------------+----------------------------------------------------+

Параметры HSS
~~~~~~~~~~~~~
+-------------------------------+----------------------------------------------------------+
| Параметр                      | Описание                                                 |
+=======+=======================+==========================================================+
| ue_db | imsi                  |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | msisdn                |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | sim_algo              |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | sqn                   |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | K                     |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | op                    |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | opc                   |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | r                     |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | c                     |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | top                   |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | topc                  |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | keccak_iter           |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | amf                   |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | impi                  |                                                          |
|       +------+----------------+----------------------------------------------------------+
|       | impu | impu           |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | imei           |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | code           |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | content        |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | content_type   |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | anonymous      |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | authentication |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | ring_only      |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | precondition   |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | 100rel         |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | asserted       |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | display_name   |                                                          |
|       |      +----------------+----------------------------------------------------------+
|       |      | domain         |                                                          |
|       +------+----------------+----------------------------------------------------------+
|       | res_len               |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | authent_type          |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | pwd                   |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | mt_call_sdp_file      |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | domain                |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | auth_on_register_only |                                                          |
|       +-----------------------+----------------------------------------------------------+
|       | force_sms_over_sg     |                                                          |
+-------+-----------------------+----------------------------------------------------------+
| ue_db_filename                |                                                          |
+-------------------------------+----------------------------------------------------------+

Элементы
--------
IMS Amarisoft состоит из следующих элементов:

* P-CSCF;
* I-CSCF;
* S-CSCF;
* HSS

Интерфейсы
----------
Про протоколы, используемые в интерфейсах, подробнее на странице "Протоколы".

MME имеет следующие интерфейсы:
